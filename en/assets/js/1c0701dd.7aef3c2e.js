"use strict";(self.webpackChunkgo_jet_documentation=self.webpackChunkgo_jet_documentation||[]).push([[235],{3905:(e,n,t)=>{t.d(n,{Zo:()=>m,kt:()=>s});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),c=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},m=function(e){var n=c(e.components);return r.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,m=d(e,["components","mdxType","originalType","parentName"]),p=c(t),s=a,f=p["".concat(l,".").concat(s)]||p[s]||u[s]||i;return t?r.createElement(f,o(o({ref:n},m),{},{components:t})):r.createElement(f,o({ref:n},m))}));function s(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=p;var d={};for(var l in n)hasOwnProperty.call(n,l)&&(d[l]=n[l]);d.originalType=e,d.mdxType="string"==typeof e?e:a,o[1]=d;for(var c=2;c<i;c++)o[c]=t[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},2350:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>d,toc:()=>c});var r=t(7462),a=(t(7294),t(3905));const i={},o="Middleware",d={unversionedId:"middleware",id:"middleware",title:"Middleware",description:"middleware}",source:"@site/docs/middleware.md",sourceDirName:".",slug:"/middleware",permalink:"/en/docs/middleware",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Routing",permalink:"/en/docs/routing"},next:{title:"Validation",permalink:"/en/docs/validation"}},l={},c=[],m={toc:c};function u(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"middleware"},"Middleware"),(0,a.kt)("p",null,"Middleware provides a convenient mechanism for inspecting and filtering  incomind and outcoming HTTP requests. Like controllers, a middleware can be created with Alfred. The command is ",(0,a.kt)("inlineCode",{parentName:"p"},"alfred middleware:create [middleware name]"),"."),(0,a.kt)("p",null,"For instance, middleware named \u201cbatman\u201d can be created by running command ",(0,a.kt)("inlineCode",{parentName:"p"},"./alfred middleware:create batman"),".\nAfter executing the command, the newly created middleware will be available in folder ",(0,a.kt)("inlineCode",{parentName:"p"},"/app/http/middleware")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="New batman middleware',title:'"New',batman:!0,middleware:!0},'package middleware\n\nimport (\n    "net/http"\n)\n\ntype BatmanMiddleware struct {\n    Name        string\n    Description string\n}\n\n// Handle description\nfunc (BatmanMiddleware) Handle(next http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request){\n          // Do stuff here if you wanna execute something BEFORE handling the request\n          next.ServeHTTP(w, r)\n          // Do something here if you wanna execute something AFTER the request\n    })\n}\n\n// GetName returns the middleware name\nfunc (m BatmanMiddleware) GetName() string {\n  return m.Name\n}\n\n// GetDescription returns the middleware description\nfunc (m BatmanMiddleware) GetDescription() string {\n  return m.Description\n}\n\n\nfunc NewBatmanMiddleware() BatmanMiddleware{\n  return BatmanMiddleware{\n     Name:        "BasicAuth",\n     Description: "Provides basic authentication",\n  }\n}\n')),(0,a.kt)("p",null,"As you can see in the example above, middleware contains three different methods: ",(0,a.kt)("inlineCode",{parentName:"p"},"Handle"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"GetName")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"GetDescription"),"."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Handle")," is the method that is executed when the middleware is executed."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"GetName")," returns the middleware name."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"GetDescription")," returns the middleware description.")),(0,a.kt)("p",null,"Every middleware should have a 'factory' function that returns an instance of the current middleware. You can use this function to enable middlewares over specific routes or groups. Just add it in the Middleware field of an HTTP router."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="Middleware in HTTPRouter"',title:'"Middleware',in:!0,'HTTPRouter"':!0},'var AppRouter = register.HTTPRouter{\n  Route: []register.Route{\n     {\n        Name:        "home",\n        Path:        "/",\n        Action:      "HomeController@Main",\n        Method:      "GET",\n        Description: "Main route",\n        Middleware: []register.Middleware{\n           middleware.NewBatmanMiddleware(),\n        },\n     },\n  }\n}\n')))}u.isMDXComponent=!0}}]);